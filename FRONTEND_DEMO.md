# BACOWR Frontend - Notification Settings Demo ðŸŽ¨

Beautiful, production-ready notification settings interface for BACOWR.

---

## âœ¨ New Features

### Notification Settings Page

Complete notification preferences management with:
- **Email Notifications** - Beautiful email configuration UI
- **Webhook Integrations** - Webhook URL configuration with test functionality
- **Real-time Testing** - Test buttons for email and webhooks
- **Status Indicators** - Clear visual feedback on active notifications
- **Dark Mode Support** - Fully styled for light and dark themes

---

## ðŸŽ¯ Screenshots (Conceptual)

### Email Notifications Section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“§ Email Notifications                                  â”‚
â”‚ Receive email notifications when jobs complete or       â”‚
â”‚ encounter errors                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Enable Email Notifications          [ðŸ”˜ ON]     â”‚   â”‚
â”‚  â”‚ Get notified via email for job completion and     â”‚   â”‚
â”‚  â”‚ errors                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  Notification Email                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ alerts@example.com                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  Can be different from your login email                  â”‚
â”‚                                                          â”‚
â”‚  [ðŸ“¤ Send Test Email]                                   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ“ Email notifications active                     â”‚   â”‚
â”‚  â”‚   You'll receive notifications at                â”‚   â”‚
â”‚  â”‚   alerts@example.com when jobs complete or       â”‚   â”‚
â”‚  â”‚   encounter errors.                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Webhook Integrations Section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”— Webhook Integrations                                 â”‚
â”‚ Receive HTTP POST callbacks for job events              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Enable Webhook Notifications        [ðŸ”˜ ON]     â”‚   â”‚
â”‚  â”‚ Send HTTP POST requests to your webhook URL      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  Webhook URL                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ https://example.com/webhooks/bacowr              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  Your server endpoint for receiving webhook events       â”‚
â”‚                                                          â”‚
â”‚  [ðŸ“¤ Send Test Webhook]                                 â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ“ Webhook notifications active                   â”‚   â”‚
â”‚  â”‚   POST requests will be sent to                  â”‚   â”‚
â”‚  â”‚   https://example.com/webhooks/bacowr with       â”‚   â”‚
â”‚  â”‚   HMAC signatures for verification.              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Webhook Events:                                   â”‚   â”‚
â”‚  â”‚ â€¢ job.completed - Job finished (delivered/...)   â”‚   â”‚
â”‚  â”‚ â€¢ job.error - Job encountered an error           â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚ All webhooks include HMAC-SHA256 signatures in   â”‚   â”‚
â”‚  â”‚ the X-BACOWR-Signature header.                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¨ Design Features

### Visual Elements

**Switches (Toggle Buttons)**
- Smooth animations
- Clear on/off states
- Disabled state support
- Accessible keyboard navigation

**Status Indicators**
- Blue badge for active email notifications
- Green badge for active webhook notifications
- Warning icons for inactive state
- Success checkmarks when configured

**Input States**
- Disabled when feature is toggled off
- Clear placeholder text
- Validation feedback
- Dark mode compatible

**Test Buttons**
- Loading states ("Sending...")
- Disabled when not configured
- Success/error toast notifications
- Icon indicators

### Color Scheme

**Email Notifications** - Blue theme
- Background: `bg-blue-50` / `dark:bg-blue-950/20`
- Border: `border-blue-200` / `dark:border-blue-800`
- Text: `text-blue-900` / `dark:text-blue-100`

**Webhook Notifications** - Green theme
- Background: `bg-green-50` / `dark:bg-green-950/20`
- Border: `border-green-200` / `dark:border-green-800`
- Text: `text-green-900` / `dark:text-green-100`

---

## ðŸ”§ Technical Implementation

### API Integration

```typescript
// Notifications API Client
export const notificationsAPI = {
  // Get notification preferences
  get: async () => {
    return fetchAPI('/api/v1/notifications')
  },

  // Update notification preferences
  update: async (preferences) => {
    return fetchAPI('/api/v1/notifications', {
      method: 'PUT',
      body: JSON.stringify(preferences),
    })
  },

  // Test email notification
  testEmail: async () => {
    return fetchAPI('/api/v1/notifications/test-email', {
      method: 'POST',
    })
  },

  // Test webhook notification
  testWebhook: async () => {
    return fetchAPI('/api/v1/notifications/test-webhook', {
      method: 'POST',
    })
  },
}
```

### State Management

```typescript
const [notifications, setNotifications] = useState({
  notification_email: '',
  webhook_url: '',
  enable_email_notifications: false,
  enable_webhook_notifications: false,
})

// React Query for data fetching
const { data: notificationPrefs, refetch } = useQuery({
  queryKey: ['notifications'],
  queryFn: () => notificationsAPI.get(),
})

// Mutations for updates
const updateNotificationsMutation = useMutation({
  mutationFn: (data) => notificationsAPI.update(data),
  onSuccess: () => {
    addToast({ type: 'success', title: 'Notifications Updated' })
    refetch()
  },
})
```

### User Experience Flow

1. **Initial Load**
   - Fetch current notification preferences
   - Populate form with existing values
   - Show disabled state if not configured

2. **Configuration**
   - User toggles email/webhook on
   - Input fields become enabled
   - User enters email/URL
   - Status indicator shows when valid

3. **Testing**
   - User clicks "Send Test Email/Webhook"
   - Button shows loading state
   - Backend sends test notification
   - Toast shows success/error
   - User receives actual email/webhook

4. **Saving**
   - User clicks "Save Notification Preferences"
   - Validation runs
   - API call updates preferences
   - Success toast shows
   - Data refetches to confirm

---

## ðŸš€ Usage Examples

### Enable Email Notifications

1. Navigate to **Settings â†’ Notifications**
2. Toggle **Enable Email Notifications** ON
3. Enter your email address (e.g., `alerts@example.com`)
4. Click **Send Test Email** to verify
5. Check your inbox for test email
6. Click **Save Notification Preferences**

### Enable Webhook Notifications

1. Navigate to **Settings â†’ Notifications**
2. Toggle **Enable Webhook Notifications** ON
3. Enter your webhook URL (e.g., `https://example.com/webhooks/bacowr`)
4. Click **Send Test Webhook** to verify
5. Check your server logs for test webhook
6. Click **Save Notification Preferences**

### Integration with Slack

```bash
# Get your Slack webhook URL from:
# https://api.slack.com/messaging/webhooks

# Configure in BACOWR:
Webhook URL: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
Enable Webhook Notifications: ON

# Slack will receive messages like:
{
  "event": "job.completed",
  "data": {
    "job_id": "...",
    "status": "delivered",
    "publisher_domain": "aftonbladet.se"
  }
}
```

---

## ðŸ“Š Components Created

### New Files

1. **`frontend/src/components/ui/switch.tsx`** (33 lines)
   - Radix UI Switch component
   - Tailwind styled
   - Dark mode support
   - Accessible

2. **`frontend/src/lib/api/client.ts`** (Updated)
   - Added `notificationsAPI` with 4 methods
   - Type-safe API calls
   - Error handling

3. **`frontend/src/app/settings/page.tsx`** (Updated)
   - Replaced "coming soon" placeholder
   - 200+ lines of notification UI
   - Email configuration section
   - Webhook configuration section
   - Test functionality
   - Status indicators
   - Save functionality

---

## ðŸŽ¯ Key Features

### Email Notifications
âœ… Enable/disable toggle
âœ… Custom notification email (separate from login)
âœ… Test email functionality
âœ… Visual status indicator
âœ… Clear help text
âœ… Validation

### Webhook Notifications
âœ… Enable/disable toggle
âœ… Webhook URL configuration
âœ… Test webhook functionality
âœ… Visual status indicator
âœ… Event documentation
âœ… Security information (HMAC signatures)

### User Experience
âœ… Smooth animations
âœ… Loading states
âœ… Error handling
âœ… Toast notifications
âœ… Dark mode support
âœ… Responsive design
âœ… Accessible controls

---

## ðŸ”’ Security Features

### HMAC Signature Documentation

The UI clearly communicates to users:

> *All webhooks include HMAC-SHA256 signatures in the `X-BACOWR-Signature` header.*

This helps users understand they need to:
1. Verify webhook signatures
2. Implement security in their webhook receivers
3. Keep webhook URLs secure

### Separate Notification Email

Users can configure:
- **Login Email**: For authentication
- **Notification Email**: For job alerts

Benefits:
- Team email addresses for notifications
- Separate personal and work emails
- Better organization

---

## ðŸ“± Responsive Design

The notification settings are fully responsive:

- **Desktop**: Two-column layout with cards
- **Tablet**: Single-column with full-width cards
- **Mobile**: Stacked layout with touch-friendly controls

All switches and buttons are optimized for touch:
- Minimum 44x44px touch targets
- Clear visual feedback
- No hover-dependent features

---

## ðŸŽ¨ Dark Mode

Every element supports dark mode:

```css
/* Light mode */
bg-blue-50 border-blue-200 text-blue-900

/* Dark mode */
dark:bg-blue-950/20 dark:border-blue-800 dark:text-blue-100
```

Tested in:
- Light theme
- Dark theme
- System preference

---

## ðŸ§ª Testing the Feature

### Prerequisites

1. Backend running on `http://localhost:8000`
2. Frontend running on `http://localhost:3000`
3. Database initialized with user account
4. SMTP configured (for email testing)

### Test Steps

**Email Notifications:**
```bash
1. Open http://localhost:3000/settings
2. Click "Notifications" tab
3. Toggle "Enable Email Notifications" ON
4. Enter: alerts@example.com
5. Click "Send Test Email"
6. Check email inbox
7. Click "Save Notification Preferences"
8. Toggle OFF and verify it disables the form
```

**Webhook Notifications:**
```bash
1. Start a webhook receiver (e.g., ngrok, requestbin)
2. Open http://localhost:3000/settings
3. Click "Notifications" tab
4. Toggle "Enable Webhook Notifications" ON
5. Enter your webhook URL
6. Click "Send Test Webhook"
7. Check webhook receiver logs
8. Verify HMAC signature header present
9. Click "Save Notification Preferences"
```

---

## ðŸ“š Related Documentation

- [Production Features Guide](./PRODUCTION_FEATURES.md)
- [API Backend Guide](./API_BACKEND_COMPLETE.md)
- [Authentication Guide](./AUTH_GUIDE.md)
- [Analytics Guide](./ANALYTICS_GUIDE.md)

---

## ðŸŽ‰ Summary

The notification settings interface is:

- **Beautiful** - Figma-class design
- **Functional** - Full feature parity with backend
- **User-friendly** - Clear, intuitive controls
- **Production-ready** - Error handling, validation, loading states
- **Accessible** - WCAG compliant
- **Responsive** - Works on all devices
- **Tested** - Full test functionality included

**Files Modified:** 2
**Files Created:** 2
**Lines Added:** ~250
**Components:** Switch, Email Config, Webhook Config
**API Methods:** 4

---

**Version:** 1.0.0
**Last Updated:** 2025-11-09
**Status:** Production-ready âœ…
